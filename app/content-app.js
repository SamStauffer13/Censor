(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var _contentScript=require("./content-script.js"),censor=new _contentScript.Censor;
},{"./content-script.js":2}],2:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),Censor=exports.Censor=function(){function e(){var t=this;_classCallCheck(this,e),this.service=new CensorService;var n=new CensorElements;this.icon=n.icon,this.menu=n.menu,this.messenger=n.messenger,this.saveButton=n.saveButton,this.nukeButton=n.nuclearButton,this.inputLeft=n.inputLeft,this.inputRight=n.inputRight,!0===this.service.ShouldRunOnPageLoad()&&(this.icon.Display(),this.service.Start()),chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener(function(e){return t.OnBrowserIconClick(e.enableCensor)}),this.SetupCensorMenu()}return _createClass(e,[{key:"OnBrowserIconClick",value:function(e){!0===e?(this.icon.Display(),this.service.Start()):!1===e&&(this.icon.Remove(),this.menu.Remove(),this.service.Stop())}},{key:"SetupCensorMenu",value:function(){var e=this;this.icon.element.onclick=function(){e.menu.Display(),e.icon.Remove()},this.menu.element.onclick=function(){e.menu.Remove(),e.icon.Display()},this.inputLeft.element.onmouseover=function(){return e.inputLeft.element.focus()},this.inputLeft.element.onclick=function(e){return e.stopPropagation()},this.inputRight.element.onmouseover=function(){return e.inputRight.element.focus()},this.inputRight.element.onclick=function(e){return e.stopPropagation()},this.saveButton.element.onclick=function(t){t.stopPropagation(),e.service.Update(e.inputLeft.element.value,e.inputRight.element.value),e.messenger.Print("BOOM! settings updated..."),setTimeout(function(){return e.messenger.Print("Need anything else?")},2e3)},this.nukeButton.element.onclick=function(t){t.stopPropagation(),e.service.Delete(),e.messenger.Print("BOOM! settings reset..."),setTimeout(function(){return e.messenger.Print("Need anything else?")},2e3)}}}]),e}(),CensorElements=function(){function e(){_classCallCheck(this,e);var t={icon:"censor-icon",menu:"censor-menu",messenger:"censor-messenger",spanLeft:"censor-span-left",inputLeft:"censor-input-left",spanRight:"censor-span-right",inputRight:"censor-input-right",saveButton:"censor-save-button",nukeButton:"censor-nuke-button"},n=document.createElement("div");n.innerHTML="<img class='"+t.icon+"' src='"+this.getSrc("app/resources/icon-large.png")+"' >\n        <div class='"+t.menu+"'>\n            <span class='"+t.messenger+"'></span>\n            <div class=''>\n                <span class='"+t.spanLeft+"'> Replace </span> <input class='"+t.inputLeft+"' type='text' placeholder='Politics' />\n                <span class='"+t.spanRight+"'> With </span> <input  type='text' placeholder='Kittens' class='"+t.inputRight+"' />\n            </div>\n            <div> \n                <img class='"+t.saveButton+"' src='"+this.getSrc("app/resources/icon-large.png")+"'> OR <img class='"+t.nukeButton+"' src='"+this.getSrc("app/resources/nuke.png")+"'>\n            </div>\n        </div>",this.icon=new CensorElement(n.getElementsByClassName(t.icon)[0]),this.menu=new CensorElement(n.getElementsByClassName(t.menu)[0]),this.messenger=new CensorElement(n.getElementsByClassName(t.messenger)[0]),this.inputLeft=new CensorElement(n.getElementsByClassName(t.inputLeft)[0]),this.inputRight=new CensorElement(n.getElementsByClassName(t.inputRight)[0]),this.saveButton=new CensorElement(n.getElementsByClassName(t.saveButton)[0]),this.nuclearButton=new CensorElement(n.getElementsByClassName(t.nukeButton)[0])}return _createClass(e,[{key:"getSrc",value:function(e){return chrome.extension?chrome.extension.getURL(e):e}}]),e}(),CensorElement=function(){function e(t){_classCallCheck(this,e),this.element=t}return _createClass(e,[{key:"Display",value:function(){document.body.appendChild(this.element)}},{key:"Remove",value:function(){document.body.contains(this.element)&&document.body.removeChild(this.element)}},{key:"Print",value:function(e){this.element.textContent=e}},{key:"_Print",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;0===n&&(this.element.textContent=""),n>=e.length||(this.element.textContent+=e[n++],setTimeout(function(){t._Print(e,n)},40))}}]),e}(),CensorService=function(){function e(){var t=this;_classCallCheck(this,e),this.CensorDB=new CensorDataAccess,this.facebookOffenders=[];var n=null;this.teenageMutant=new MutationObserver(function(e){var s=function(){return e.forEach(function(e){return t._CensorDom()})};clearTimeout(n),n=setTimeout(function(){return s()},1e3)})}return _createClass(e,[{key:"Start",value:function(){this._CensorDom(),this.teenageMutant.observe(document.body,{childList:!0}),this.CensorDB.UpdateCensorStatus(!0)}},{key:"Stop",value:function(){this.teenageMutant.disconnect(),this.CensorDB.UpdateCensorStatus(!1),this.facebookOffenders.forEach(function(e){e.innerHTML=e.previousContents})}},{key:"Update",value:function(e,t){if(e=e.toLowerCase(),t=t.toLowerCase(),""!==e&&""!==t){if("kittens"===t){var n=this.CensorDB.GetTriggerWarnings();if(n.indexOf(e)>=0)return;return n.push(e),void this.CensorDB.UpdateTriggerWarnings(n)}var s=this.CensorDB.GetDebauchery();s[e]=t,this.CensorDB.UpdateDebauchery(s)}}},{key:"Delete",value:function(){this.CensorDB.UpdateDebauchery(null),this.CensorDB.UpdateTriggerWarnings(null)}},{key:"ShouldRunOnPageLoad",value:function(){return this.CensorDB.IsCensorEnabled()}},{key:"_CensorDom",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,n=document.createTreeWalker(t,NodeFilter.SHOW_TEXT);n.nextNode();)!function(){var t=n.currentNode.nodeValue.toLowerCase().trim();e.CensorDB.GetTriggerWarnings().forEach(function(s){if(t.includes(s)&&n.currentNode)if("www.facebook.com"==window.location.hostname){var r=e._GetOffendingFacebookPost(n.currentNode);null!==r&&e.facebookOffenders.push(r)}else n.currentNode.parentElement&&(n.currentNode.parentElement.innerHTML=e._GetRandomKittenGif())});var s=e.CensorDB.GetDebauchery();Object.keys(s).forEach(function(e){e=e.toLowerCase().trim(),t.includes(e)&&(n.currentNode.nodeValue=t.replace(e,s[e]))})}();this.facebookOffenders.forEach(function(t){t.firstChild&&"censor-kitty-photo"===t.firstChild.id||(t.previousContents=t.innerHTML,t.innerHTML=e._GetRandomKittenGif())})}},{key:"_GetOffendingFacebookPost",value:function(e){for(;(e=e.parentElement)&&!e.classList.contains("userContentWrapper"););return e}},{key:"_GetRandomKittenGif",value:function(){return'<img id="censor-kitty-photo" src="https://thecatapi.com/api/images/get?format=src&type=jpg&size=large&category=boxes"/>'}}]),e}(),CensorDataAccess=function(){function e(){_classCallCheck(this,e),this.CensorStatusKey="CensorStatusKey",this.CensorTriggerWarningKey="CensorTriggerWarningKey",this.CensorDebaucheryKey="CensorDebaucheryKey",this.defaultTriggerWarnings=["[politics]"],this.defaultDebauchery={"sam stauffer":"༼ つ ◕_◕ ༽つ"}}return _createClass(e,[{key:"GetTriggerWarnings",value:function(){var e=localStorage.getItem(this.CensorTriggerWarningKey);return null===e||""===e||"null"===e?this.defaultTriggerWarnings:e.split(",")}},{key:"GetDebauchery",value:function(){var e=localStorage.getItem(this.CensorDebaucheryKey);if(null===e||""===e||"null"===e)return this.defaultDebauchery;try{return JSON.parse(e)}catch(t){return console.error("unable to parse ",e,t),localStorage.clear(),this.defaultDebauchery}}},{key:"UpdateTriggerWarnings",value:function(e){localStorage.setItem(this.CensorTriggerWarningKey,e)}},{key:"UpdateDebauchery",value:function(e){localStorage.setItem(this.CensorDebaucheryKey,JSON.stringify(e))}},{key:"IsCensorEnabled",value:function(){var e=localStorage.getItem(this.CensorStatusKey);return null===e||""===e||"true"===e}},{key:"UpdateCensorStatus",value:function(e){localStorage.setItem(this.CensorStatusKey,e)}}]),e}();
},{}]},{},[1])

